import java.util.concurrent.*;

public class Bai4 {

    static CompletableFuture<Void> checkStock() {
        return CompletableFuture.runAsync(() -> {
            sleep(1000);
            System.out.println(" Kiểm tra tồn kho xong");
        });
    }

    static CompletableFuture<Void> payment() {
        return CompletableFuture.runAsync(() -> {
            sleep(1500);
            System.out.println(" Thanh toán xong");
        });
    }

    static CompletableFuture<Void> shipping() {
        return CompletableFuture.runAsync(() -> {
            sleep(2000);
            System.out.println(" Vận chuyển xong");
        });
    }

    static void sleep(int ms) {
        try {
            Thread.sleep(ms);
        } catch (Exception e) {
        }
    }

    public static void main(String[] args) throws Exception {

        CompletableFuture<Void> stock = checkStock();
        CompletableFuture<Void> pay = payment();
        CompletableFuture<Void> ship = shipping();

        CompletableFuture.allOf(stock, pay, ship)
                .thenRun(() -> System.out.println(" Đơn hàng hoàn tất!"))
                .get();
    }
}
